import {
  Box,
  Link,
  Modal,
  ModalBody,
  ModalContent,
  ModalOverlay,
  Stack,
  Text,
  useColorModeValue,
} from '@chakra-ui/react'
import React, { FC } from 'react'
import SubscribeForm from './SubscribeForm'

const Logo = () => (
  <svg style={{ margin: "0 auto" }} xmlns="http://www.w3.org/2000/svg" width="179" height="38" viewBox="0 0 179 38" fill="none">
  <path d="M19 38C29.4934 38 38 29.4934 38 19C38 8.50659 29.4934 0 19 0C8.50659 0 0 8.50659 0 19C0 29.4934 8.50659 38 19 38Z" fill="#E3EEEA"/>
  <path d="M15.0591 10.583C13.5154 12.1302 12.6065 14.1991 12.5113 16.3826C12.416 18.5661 13.1412 20.7062 14.5442 22.382L23.4742 13.452L26.8543 10.07C25.1796 8.66451 23.0389 7.93772 20.8547 8.03304C18.6704 8.12836 16.6012 9.03887 15.0553 10.5849L15.0591 10.583Z" fill="#366957"/>
  <path d="M14.5217 24.5556L11.1416 27.9357C12.8161 29.3427 14.9573 30.0707 17.1423 29.976C19.3274 29.8813 21.3976 28.9708 22.9441 27.4243C24.4906 25.8778 25.4011 23.8076 25.4958 21.6226C25.5905 19.4375 24.8625 17.2963 23.4555 15.6218L14.5217 24.5556Z" fill="#366957"/>
  <path d="M47.5813 14.973C47.5813 13.93 47.8502 13.0093 48.388 12.2107C48.9258 11.4122 49.6673 10.7929 50.6125 10.3529C51.5741 9.89655 52.6822 9.66839 53.9371 9.66839C55.1431 9.66839 56.1861 9.88025 57.0661 10.304C57.9625 10.7277 58.6551 11.3307 59.144 12.1129C59.6492 12.8952 59.9181 13.8241 59.9507 14.8997H56.8217C56.7891 14.1337 56.512 13.5389 55.9905 13.1152C55.469 12.6752 54.7683 12.4552 53.8882 12.4552C52.9267 12.4552 52.1526 12.6752 51.5659 13.1152C50.9955 13.5389 50.7103 14.1256 50.7103 14.8753C50.7103 15.5108 50.8814 16.016 51.2237 16.3909C51.5822 16.7494 52.1363 17.0183 52.886 17.1976L55.6972 17.8332C57.2291 18.1591 58.3699 18.7213 59.1195 19.5199C59.8692 20.3021 60.244 21.3614 60.244 22.6978C60.244 23.7897 59.9751 24.7512 59.4373 25.5824C58.8995 26.4135 58.1336 27.0572 57.1395 27.5135C56.1616 27.9536 55.0127 28.1736 53.6927 28.1736C52.4378 28.1736 51.3377 27.9617 50.3925 27.538C49.4473 27.098 48.7058 26.4868 48.168 25.7046C47.6465 24.9223 47.3694 24.0015 47.3368 22.9422H50.4659C50.4822 23.6919 50.7755 24.2867 51.3459 24.7268C51.9326 25.1505 52.723 25.3623 53.7171 25.3623C54.7601 25.3623 55.5831 25.1505 56.1861 24.7268C56.8054 24.2867 57.115 23.7082 57.115 22.9911C57.115 22.3719 56.952 21.8829 56.6261 21.5244C56.3002 21.1496 55.7705 20.8888 55.0372 20.7422L52.2015 20.1066C50.6859 19.7806 49.5369 19.1939 48.7547 18.3465C47.9724 17.4828 47.5813 16.3583 47.5813 14.973ZM65.617 27.8558H62.6347V9.66839H65.6415V17.3442C66.0163 16.7576 66.5378 16.2931 67.206 15.9509C67.8905 15.5923 68.6727 15.4131 69.5528 15.4131C71.0358 15.4131 72.1603 15.8612 72.9262 16.7576C73.7085 17.6539 74.0996 18.8762 74.0996 20.4244V27.8558H71.1173V21.1333C71.1173 20.4488 71.0113 19.8866 70.7995 19.4466C70.5876 19.0065 70.2943 18.6806 69.9194 18.4687C69.5446 18.2406 69.1046 18.1265 68.5994 18.1265C67.9801 18.1265 67.4423 18.265 66.986 18.5421C66.546 18.8028 66.2037 19.1695 65.9593 19.6421C65.7311 20.1147 65.617 20.6525 65.617 21.2555V27.8558ZM76.3209 21.7933C76.3209 20.5384 76.5979 19.4384 77.152 18.4932C77.7061 17.5317 78.4721 16.782 79.4499 16.2442C80.4277 15.7064 81.5359 15.4375 82.7745 15.4375C84.0293 15.4375 85.1375 15.7064 86.0991 16.2442C87.0769 16.782 87.8428 17.5317 88.3969 18.4932C88.951 19.4384 89.2281 20.5384 89.2281 21.7933C89.2281 23.0482 88.951 24.1564 88.3969 25.1179C87.8428 26.0631 87.0769 26.8046 86.0991 27.3424C85.1375 27.8802 84.0293 28.1491 82.7745 28.1491C81.5359 28.1491 80.4277 27.8802 79.4499 27.3424C78.4721 26.8046 77.7061 26.0631 77.152 25.1179C76.5979 24.1564 76.3209 23.0482 76.3209 21.7933ZM79.3032 21.7933C79.3032 22.5267 79.4499 23.1704 79.7432 23.7245C80.0529 24.2786 80.4603 24.7105 80.9655 25.0201C81.487 25.3297 82.09 25.4846 82.7745 25.4846C83.4589 25.4846 84.0619 25.3297 84.5834 25.0201C85.1049 24.7105 85.5124 24.2786 85.8057 23.7245C86.0991 23.1704 86.2457 22.5267 86.2457 21.7933C86.2457 21.0437 86.0991 20.3999 85.8057 19.8621C85.5124 19.308 85.1049 18.8762 84.5834 18.5665C84.0619 18.2569 83.4589 18.1021 82.7745 18.1021C82.09 18.1021 81.487 18.2569 80.9655 18.5665C80.4603 18.8762 80.0529 19.308 79.7432 19.8621C79.4499 20.3999 79.3032 21.0437 79.3032 21.7933ZM91.592 33.4538V15.7797H94.3543L94.5499 17.6131C94.9084 16.9124 95.4625 16.3746 96.2122 15.9997C96.9619 15.6086 97.7849 15.4131 98.6812 15.4131C99.8383 15.4131 100.832 15.6738 101.664 16.1953C102.511 16.7168 103.171 17.442 103.644 18.371C104.116 19.2999 104.353 20.3999 104.353 21.6711C104.353 22.9259 104.133 24.0423 103.692 25.0201C103.252 25.9979 102.609 26.772 101.761 27.3424C100.93 27.8965 99.9116 28.1736 98.7056 28.1736C97.8093 28.1736 96.9863 28.0024 96.2366 27.6602C95.5033 27.318 94.9492 26.8454 94.5744 26.2424V33.4538H91.592ZM94.5988 21.8178C94.5988 22.5348 94.7373 23.1704 95.0144 23.7245C95.2914 24.2786 95.6825 24.7186 96.1878 25.0446C96.7093 25.3542 97.3122 25.509 97.9967 25.509C98.6975 25.509 99.3005 25.3542 99.8057 25.0446C100.311 24.7186 100.694 24.2786 100.955 23.7245C101.215 23.1704 101.346 22.5348 101.346 21.8178C101.346 21.1007 101.215 20.4651 100.955 19.911C100.694 19.3569 100.311 18.9251 99.8057 18.6154C99.3005 18.2895 98.6975 18.1265 97.9967 18.1265C97.3122 18.1265 96.7093 18.2813 96.1878 18.591C95.6825 18.9006 95.2914 19.3325 95.0144 19.8866C94.7373 20.4407 94.5988 21.0844 94.5988 21.8178ZM121.31 28.1491C119.566 28.1491 118.05 27.7743 116.763 27.0246C115.492 26.2587 114.497 25.1912 113.78 23.8223C113.08 22.437 112.729 20.8073 112.729 18.9332C112.729 17.0753 113.088 15.4538 113.805 14.0686C114.538 12.6833 115.565 11.6077 116.885 10.8418C118.205 10.0758 119.729 9.69283 121.456 9.69283C122.874 9.69283 124.145 9.95358 125.27 10.4751C126.394 10.9966 127.323 11.73 128.057 12.6752C128.79 13.6041 129.254 14.7123 129.45 15.9997H126.15C125.84 14.9567 125.262 14.15 124.414 13.5797C123.583 12.993 122.564 12.6996 121.359 12.6996C120.283 12.6996 119.338 12.9522 118.523 13.4574C117.724 13.9626 117.105 14.6797 116.665 15.6086C116.225 16.5375 116.005 17.6457 116.005 18.9332C116.005 20.1718 116.225 21.2637 116.665 22.2089C117.105 23.1378 117.724 23.863 118.523 24.3845C119.338 24.8897 120.283 25.1423 121.359 25.1423C122.581 25.1423 123.624 24.849 124.488 24.2623C125.368 23.6756 125.954 22.8852 126.248 21.8911H129.499C129.271 23.1297 128.774 24.2216 128.008 25.1668C127.258 26.112 126.305 26.8454 125.148 27.3669C124.007 27.8884 122.727 28.1491 121.31 28.1491ZM131.865 27.8558V15.7797H134.847V27.8558H131.865ZM133.332 13.3596C132.826 13.3596 132.395 13.1885 132.036 12.8463C131.694 12.4878 131.523 12.0559 131.523 11.5507C131.523 11.0455 131.694 10.6218 132.036 10.2795C132.395 9.93729 132.826 9.76617 133.332 9.76617C133.837 9.76617 134.261 9.93729 134.603 10.2795C134.961 10.6218 135.141 11.0455 135.141 11.5507C135.141 12.0559 134.961 12.4878 134.603 12.8463C134.261 13.1885 133.837 13.3596 133.332 13.3596ZM145.507 15.7309V18.4932H144.407C143.315 18.4932 142.459 18.7865 141.84 19.3732C141.22 19.9436 140.911 20.8155 140.911 21.9889V27.8558H137.928V15.8042H140.74L140.984 18.2976H140.691C140.854 17.4991 141.237 16.8472 141.84 16.342C142.443 15.8368 143.225 15.5842 144.187 15.5842C144.398 15.5842 144.61 15.5923 144.822 15.6086C145.034 15.6249 145.262 15.6657 145.507 15.7309ZM146.41 21.7933C146.41 20.5547 146.663 19.4547 147.168 18.4932C147.69 17.5317 148.399 16.782 149.295 16.2442C150.208 15.6901 151.259 15.4131 152.448 15.4131C154.094 15.4131 155.439 15.8449 156.482 16.7087C157.541 17.5561 158.152 18.705 158.315 20.1555H155.333C155.154 19.471 154.82 18.9576 154.331 18.6154C153.858 18.2569 153.263 18.0776 152.546 18.0776C151.927 18.0776 151.373 18.2324 150.884 18.5421C150.411 18.8354 150.045 19.2591 149.784 19.8132C149.523 20.3673 149.393 21.0274 149.393 21.7933C149.393 22.5593 149.515 23.2193 149.759 23.7734C150.004 24.3275 150.354 24.7594 150.811 25.069C151.283 25.3623 151.837 25.509 152.473 25.509C153.223 25.509 153.842 25.3297 154.331 24.9712C154.836 24.6127 155.17 24.0993 155.333 23.4312H158.34C158.209 24.3764 157.875 25.2075 157.338 25.9246C156.816 26.6254 156.14 27.1795 155.309 27.5869C154.477 27.978 153.532 28.1736 152.473 28.1736C151.251 28.1736 150.183 27.9128 149.271 27.3913C148.358 26.8535 147.649 26.112 147.144 25.1668C146.655 24.2053 146.41 23.0808 146.41 21.7933ZM163.566 27.8558H160.608V9.66839H163.566V27.8558ZM172.097 28.1736C170.908 28.1736 169.848 27.9047 168.919 27.3669C168.007 26.8128 167.29 26.0631 166.768 25.1179C166.247 24.1564 165.986 23.0563 165.986 21.8178C165.986 20.5629 166.238 19.4547 166.744 18.4932C167.249 17.5317 167.958 16.782 168.87 16.2442C169.783 15.6901 170.826 15.4131 171.999 15.4131C173.222 15.4131 174.273 15.6738 175.153 16.1953C176.033 16.7005 176.709 17.4094 177.182 18.3221C177.671 19.2347 177.915 20.3266 177.915 21.5977V22.5022L167.55 22.5267L167.599 20.6199H174.957C174.957 19.7888 174.688 19.1206 174.151 18.6154C173.629 18.1102 172.92 17.8576 172.024 17.8576C171.323 17.8576 170.728 18.0043 170.239 18.2976C169.767 18.591 169.408 19.031 169.164 19.6177C168.919 20.2044 168.797 20.9214 168.797 21.7689C168.797 23.0726 169.074 24.0586 169.628 24.7268C170.199 25.3949 171.038 25.729 172.146 25.729C172.961 25.729 173.629 25.5742 174.151 25.2646C174.688 24.9549 175.039 24.5149 175.202 23.9445H177.964C177.703 25.2646 177.052 26.2994 176.009 27.0491C174.982 27.7987 173.678 28.1736 172.097 28.1736Z" fill="black"/>
  </svg>
)

interface Input {
  id: string,
  placeholder: string,
  screenReaderLabel: string,
  type: string,
}

interface FormFieldArray extends Array<Input>{}

export interface PopupDiscountProps {
  isOpen: boolean,
  closeModal: () => void,
  topText?: string,
  greenText?: string,
  boldText?: string,
  bottomText?: string,
  closeModalText?: string,
  // Subscribe form
  inputFields: FormFieldArray,
  buttonText: string,
}

const PopupDiscount:FC<PopupDiscountProps> = ({ isOpen, closeModal, topText, greenText, boldText, bottomText, closeModalText, inputFields, buttonText }) => (
    <Modal
      isOpen={isOpen}
      onClose={closeModal}
      size="2xl"
      // `trapFocus` and `blockScrollOnMount` are only switched off so that the preview works properly.
      blockScrollOnMount={false}
      trapFocus={false}
    >
      <ModalOverlay />
      <ModalContent borderRadius="2xl" mx="4">
        <ModalBody>
          <Stack
            maxW="xs"
            mx="auto"
            py={{ base: '12', md: '16' }}
            spacing={{ base: '6', md: '10' }}
          >
            <Logo />
            <Stack spacing="3" textAlign="center">
              <Text fontSize="lg">{topText}</Text>
              <Text
                color={useColorModeValue('green.500', 'green.200')}
                fontWeight="extrabold"
                fontSize={{ base: '5xl', md: '6xl' }}
                textTransform="uppercase"
                transform="scale(1.2)"
              >
                {greenText}
              </Text>
              <Text fontSize="lg">
                <Box as="span" whiteSpace="nowrap" fontWeight="bold">
                  {boldText}
                </Box>{' '}
                {bottomText}
              </Text>
            </Stack>
            <SubscribeForm
              inputFields={inputFields}
              buttonText={buttonText}
            />
            <Link
              fontSize="sm"
              textAlign="center"
              color={useColorModeValue('gray.600', 'gray.400')}
              textDecoration="underline"
              onClick={closeModal}
            >
              {closeModalText}
            </Link>
          </Stack>
        </ModalBody>
      </ModalContent>
    </Modal>
)

export default PopupDiscount
